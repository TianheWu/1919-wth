## 周报13

这一整周的工作量基本都是在代码上。一个是为之前的项目添加了半监督学习代码（mixmatch）。还有是复现了SRCNN论文的所有步骤，包括数据处理，模型搭建，对数据集进行测试等。

### 半监督学习

现在的半监督学习的SOTA是mixmatch方法，本质是对数据进行增广。但是根据不同的任务，可以衍生出不同的数据增广方法。这周我想到了一个针对机械臂抓取物品的数据增广方法。我浏览了目前机器人顶会上关于机械臂抓取位姿生成网络的文章，很少有针对于该任务做数据增广方面的创新。

#### 数据增广

传统对图像的数据增广有平移，旋转，镜像，放缩等。对于该任务来讲，传进的数据标签是下图中的绿色方框（绿色方框也就是机械臂抓取的地方）。因此我就想，大家普遍是对一张图进行数据增广，那么我是不是可以尝试将两张图片合并成一张做数据增广呢？或者说我将一张图经过裁剪，分为两张图呢？

![image.png](assets/image-20211031222649-t3aafz3.png)

因此，针对上述的观点我对新的数据增广方式分为两类，**合并**与**分裂**。而对于合并和分裂一张图的两种做法，我们都需要考虑到一个事情，那就是绿色方框的标签我们该如何处理。

#### 分裂

对于将一张图进行分裂的操作，我们需要保持标签的完整性，也就是说绿色方框内的标签是不能动的。因此对于分裂问题非常好想，由于图像是（300，300）大小的，只要我们分裂图片时不切分掉标签框即可。

#### 合并

对于合并图片就比较难了。合并时根据要保留双方的标签框的原则，我设计了如下算法：

* 将一张图片固定，固定的图片每一个点都可以作为另一张图片放置时的center点；
* 遍历每一个center点，在每一个点处旋转所放置的图，可以设置每旋转一次旋转15度或30度；
* 当旋转的图片的标签框与固定住的图片标签框不重合时停止。

例如上述算法，针对每两张图片都可进行合并。下周我会实现这种算法，看看用自己想到的方式做数据增广，是否针对小样本量数据训练有所提升。

### SRCNN

上周我在回顾PSPNet的时候，发现有一个步骤，就是在网络的末尾，需要对卷积图像进行上采样步骤。传统的上采样步骤是对图像做双三次插值。我想到如果改进该方法是否可以提高网络的准确性？于是我发现了目前图像处理方面的超分领域正是在利用深度学习的方式做这件事。

因此这周组会后我加了石书玮师兄的微信，石师兄帮我列了从14年开山鼻祖SRCNN后到现阶段超分领域最有影响力的文章。推荐我复现一些经典的文章。

确实，这周后三天从头到尾复现了一篇论文后感觉代码能力增强了很多，许多之前不了解的细枝末节的坑也踩到了，接下来谈一谈我对SRCNN复现的结果和一些感想。

#### 网络结构

SRCNN的网络结构比较简单，也是从传统方法过度到深度学习方法。只用了3个卷积层。在将数据传入网络前先要做`Bicubic`操作，整体算法如下图所示。

![image.png](assets/image-20211031231855-pfkkud0.png)

在处理数据的时候，有一个细节我留意了一下，就是作者只对`Y`通道进行处理，而不是对`YCRCB`三个通道进行学习。于是我抱着尝试的心态更改了传入的数据维度，增加训练两个维度，看看效果会不会更好。针对于该网络结构，还需要阅读更多的论文去学习他们是如何创新的。

#### Y通道训练实验结果

先放一下迭代了150次后只对`Y`通道进行训练的效果图：

![image.png](assets/image-20211031232207-vibvjt9.png)![image.png](assets/image-20211031232229-77jbdls.png)

上方左侧是用传统方法双三次插值进行放大，右侧是经过SRCNN后处理生成的图，图片由（200，200）大小生成后的大小为（800， 800）。可以看出传统方法放大后存在过度锐化的问题，分辨率不高。右侧图片相比左侧更加圆滑，但就是比较模糊，因此我觉得对`Cr`和`Cb`空间也需要训练，不能只训练`Y`通道。

#### 三通道训练实验结果

![image.png](assets/image-20211031232207-vibvjt9.png)![image.png](assets/image-20211101013147-u5vmwi5.png)

可以看出三通道训练效果并不好，但是可能是由于迭代次数不够，或者是造成了过拟合现象。还需要进一步做实验去研究。

新的实验已经跑上了，等明天看结果即可。

![image.png](assets/image-20211031234407-6mm2p17.png)